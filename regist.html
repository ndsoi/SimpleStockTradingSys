<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>注册界面</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>

<div id="app">
  <h1>注册界面</h1>
  <form @submit.prevent="register">
    <div>
      <label for="username">用户名：</label>
      <input type="text" id="username" v-model="username">
    </div>
    <div>
      <label for="password">密码：</label>
      <input type="password" id="password" v-model="password">
    </div>
    <div>
      <label for="confirmPassword">确认密码：</label>
      <input type="password" id="confirmPassword" v-model="confirmPassword">
    </div>
    <button type="submit">注册</button>
  </form>
  <p v-if="message">{{ message }}</p>
</div>

<script>
  const { createApp } = Vue
  createApp({
    data(){
      return {
      username: '',
      password: '',
      confirmPassword: '',
      message: '',}

    },
    methods:{
      register: function() {
      if (this.password !== this.confirmPassword) {
        this.message = '密码与确认密码不一致';
      } else {
        // 这里可以添加发送注册请求的逻辑，比如使用axios库发送POST请求到服务器
        // 根据服务器返回的结果更新message
        // 调用服务端的json
        fetch(`http://127.0.0.1:12345/regist?username=${this.username}&pwd=${this.password}`)
    .then((response) => response.json())
    .then((data) => {

        if (data === true) {
            this.message = '注册成功';
        } else {
            this.message = '注册失败，请重试';
        }
    })
    .catch((error) => {
        console.error('请求失败：', error);
        this.message = '请求失败，请重试';
    });


        
      }
    }
  
    }

  }).mount("#app")
</script>

</body>
</html>
